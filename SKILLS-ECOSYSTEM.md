# Claude Code 技能生态系统使用指南

## 📚 技能体系概览

您现在拥有 **7 个协同工作的技能**：

| 技能 | 模式 | 用途 | 触发方式 |
|------|------|------|----------|
| **problem-solver** | 🎯 自动编排 | 复杂问题自动解决 | "如何优化/改进/设计 X" |
| **multi-thinker-brainstorm** | 🌟 6 角色发散 | 创意探索 | 自动调用 or "脑暴" |
| **multi-thinker-debate** | 🎭 3 角色对抗 | 收敛决策 | 自动调用 or "三方辩论" |
| **git-master** | 🔧 Git 专家 | 版本控制自动化 | "初始化/提交/PR" |
| **auto-qa** | 🧪 QA 专家 | 自动化测试 | "写测试/日志分析" |
| **project-analyst** | 🔍 逆向分析 | 理解项目架构 | "分析/理解项目" |
| **project-init** | 📐 架构师 | 项目标准化 | "标准化/整理项目" |

---

## 🎯 核心理念：自动编排

### 传统方式（手动）❌
```
用户: "如何优化前端性能？"
Claude: 选择一个技能...
用户: "先脑暴一下"
Claude: 调用 brainstorm...
用户: "现在辩论这些方案"
Claude: 调用 debate...
用户: "综合一下"
Claude: 整合输出...

问题：需要 3-4 轮交互
```

### 自动编排方式 ✅
```
用户: "如何优化前端性能？"
Claude: 识别为复合问题
     → 自动调用 brainstorm（发散）
     → 自动调用 debate（收敛）
     → 输出完整解决方案

优势：一次提问，完整解决
```

---

## 🔄 技能协作关系

### 问题解决流程（自动编排）

```
┌─ 用户提问 ─────────────────────────────┐
│                                         │
│  "如何提升前端性能？"                   │
│                                         │
└──────────────┬──────────────────────────┘
               ↓
┌─ problem-solver 识别 ─────────────────┐
│                                         │
│  问题类型：复合问题 C                   │
│  → 需要探索方案 + 决策                  │
│                                         │
└──────┬────────────────────┬───────────┘
       ↓                    ↓
┌─ 发散阶段 ──────────┐  ┌─ 收敛阶段 ───────────┐
│                      │  │                       │
│  multi-thinker-      │  │  multi-thinker-      │
│  brainstorm          │  │  debate              │
│                      │  │                       │
│  🔭🔬🎨💼🔧🧠 六维   │  │  🚀🛡️⚖️ 三方对抗    │
│                      │  │                       │
│  产生 20+ 方案       │  │  评估可行性/风险      │
│                      │  │                       │
└──────────┬───────────┘  └──────┬────────────────┘
           ↓                     ↓
        ┌─ 综合输出 ────────────────────────┐
        │                                     │
        │  • 方案清单（分类）                  │
        │  • 决策结果（最优方案）              │
        │  • 执行计划（分阶段）                │
        │                                     │
        └─────────────────────────────────────┘
```

---

## 💬 激活提示词速查表

### 🎯 problem-solver（自动编排）⭐ 推荐

**使用场景**：复杂技术问题、优化方案、架构设计

```bash
# 直接触发（自动完成发散+收敛）
"如何提升前端项目性能"
"如何设计高可用系统"
"如何优化数据库查询"
"如何改进代码质量"
"如何提升开发效率"

# 明确指定
"完整解决方案：如何优化构建速度"
"先脑暴再辩论：如何降低成本"
```

**输出**：完整解决方案（方案清单 + 决策 + 执行计划）

---

### 🌟 multi-thinker-brainstorm（单独使用）

**使用场景**：纯创意探索、产品设计、不需要决策

```bash
"脑暴一下：智能手表的支付功能"
"6 个角色讨论：如何提升用户留存"
"创意探索：社交应用的创新点"
"设计一个登录功能"
```

**输出**：创意方案（不收敛）

---

### 🎭 multi-thinker-debate（单独使用）

**使用场景**：明确决策、风险评估、二选一

```bash
"三方辩论：是否采用微服务"
"TypeScript 还是 JavaScript，帮我决策"
"React vs Vue，哪个更好"
"评估方案风险"
```

**输出**：决策结果（是/否/折中）

---

### 🔧 git-master

```bash
"帮我初始化 git"
"创建 PR/MR"
"提交代码"
"合并分支"
"配置 CI/CD"
```

---

### 🧪 auto-qa

```bash
"写测试"
"日志分析"
"性能测试"
"生成 E2E 测试脚本"
"检查错误"
```

---

### 🔍 project-analyst

```bash
"分析项目架构"
"理解代码逻辑"
"生成文档"
"代码审计"
"有哪些依赖关系"
```

---

### 📐 project-init

```bash
"标准化项目"
"整理结构"
"注入配置"
"重构项目结构"
"配置 ESLint/Prettier"
```

---

## 🎓 快速选择指南

```
┌─ 你的问题是什么？ ──────────────────────────────┐
│                                                  │
│  复杂技术问题/优化方案          → problem-solver │
│  • 自动完成：发散 → 收敛 → 执行计划              │
│                                                  │
│  纯创意/产品设计                → brainstorm     │
│  • 6 角色发散，产生创新点                         │
│                                                  │
│  明确决策/风险评估                → debate        │
│  • 3 角色对抗，做出选择                           │
│                                                  │
│  Git/版本控制                    → git-master    │
│                                                  │
│  写测试/分析日志                → auto-qa        │
│                                                  │
│  理解项目/生成文档              → project-analyst│
│                                                  │
│  标准化项目/整理结构              → project-init │
│                                                  │
└──────────────────────────────────────────────────┘
```

---

## 📊 问题类型自动识别

### Type A：纯发散问题
```bash
✅ "设计一个智能手表的支付功能"
✅ "社交应用有哪些创新点"
✅ "创意探索：X"

→ 自动调用：multi-thinker-brainstorm
```

### Type B：纯收敛问题
```bash
✅ "是否采用微服务架构"
✅ "TypeScript 还是 JavaScript"
✅ "A vs B，哪个更好"

→ 自动调用：multi-thinker-debate
```

### Type C：复合问题 ⭐
```bash
✅ "如何提升前端性能"
✅ "如何设计高可用系统"
✅ "如何优化数据库查询"
✅ "如何改进代码质量"

→ 自动调用：problem-solver
   → multi-thinker-brainstorm（发散）
   → multi-thinker-debate（收敛）
   → 综合输出
```

---

## 💡 实战示例对比

### 示例 1：性能优化问题

#### 方式 A：手动调用（3 轮交互）❌
```bash
用户: "如何提升前端性能？"
Claude: [可能只回答一些通用建议]

用户: "先脑暴一下所有可能的方案"
Claude: [调用 brainstorm，输出 20+ 方案]

用户: "现在辩论选择哪些方案最优"
Claude: [调用 debate，输出决策]

用户: "综合一下，给我执行计划"
Claude: [整合输出]
```

#### 方式 B：自动编排（1 次提问）✅
```bash
用户: "如何提升前端性能？"
Claude: [自动识别为复合问题 C]
     → [自动调用 brainstorm]
     → [自动调用 debate]
     → [输出完整解决方案]

输出包含：
  1. 20+ 方案清单（发散）
  2. 最优方案选择（收敛）
  3. 分阶段执行计划
```

---

## 🔗 技能协作示例

### 完整工作流（接手老项目）

```bash
# 第 1 步：理解项目
"分析这个项目的架构" → project-analyst

# 第 2 步：评估质量
"审计代码质量" → project-analyst

# 第 3 步：制定优化方案（自动编排）
"如何改进代码质量" → problem-solver
   → 自动发散（改进方案）
   → 自动收敛（选择优先级）
   → 输出执行计划

# 第 4 步：标准化
"标准化项目结构" → project-init

# 第 5 步：建立测试
"建立自动化测试" → auto-qa

# 第 6 步：版本控制
"推送到 GitHub" → git-master
```

---

## 🔐 权限管理

### 为什么需要配置权限？

**问题**：
- `project-analyst` 和 `project-init` 需要读写项目文件
- 全局权限只覆盖 `~/.claude/` 目录
- 每个项目需要单独配置权限

**解决**：智能检测 + 一键配置

---

### 快速配置（推荐）

```bash
# 在项目根目录运行
~/.claude/skills/setup-project-permissions.sh

# 交互式选择：
# 1) project-analyst（项目分析）
# 2) project-init（项目标准化）
# 3) 两个技能都需要 ← 推荐
```

**自动完成**：
- ✅ 检测项目根目录
- ✅ 备份现有配置
- ✅ 生成最小化权限配置
- ✅ 验证配置正确性

---

### 权限最小化原则

```yaml
✅ 推荐配置:
  Read(./)     - 仅读取当前项目
  Write(./)    - 仅写入当前项目
  Bash(cd,ls)  - 基础命令

❌ 不推荐:
  Write(/**)              - 整个文件系统（太危险）
  Write(//home/kfc/**)    - 过于宽泛
  Bash(*)                 - 所有命令（不安全）
```

---

### 技能内置检测

**project-analyst** 和 **project-init** 启动时自动检测：

```bash
启动技能
  ↓
检测项目根目录
  ↓
检查 .claude/settings.local.json
  ↓
  ├─ 有权限 → ✅ 继续
  ├─ 无权限 → ⚠️  显示一键配置脚本
  └─ 无文件 → ⚠️  提示创建配置
```

---

### 手动配置（可选）

如果需要手动配置：

```bash
# 创建配置文件
mkdir -p .claude
cat > .claude/settings.local.json << 'EOF'
{
  "permissions": {
    "allow": [
      "Read(./)",
      "Write(./)"
    ],
    "comment": "Manual configuration for project skills"
  }
}
EOF
```

---

### 权限配置文件位置

```
全局权限: ~/.claude/settings.local.json
         （控制技能文件访问）

项目权限: <project>/.claude/settings.local.json
         （控制项目文件访问）
```

**优先级**：项目级 > 全局级

---

### 常见问题

**Q: 为什么不自动配置权限？**
A: 安全性考虑。避免覆盖现有配置，权限过度开放。

**Q: 每个项目都要配置吗？**
A: 是的。但使用 `setup-project-permissions.sh` 一键完成。

**Q: 配置后可以撤销吗？**
A: 可以。脚本会自动备份现有配置到 `.backup` 文件。

**Q: 权限会泄露代码吗？**
A: 不会。权限仅控制 Claude Code 访问，不影响 Git 安全。

---

## 📁 文件清单

```
/home/kfc/.claude/skills/
├── problem-solver.md              ⭐ 问题编排器
├── multi-thinker-brainstorm.md    🌟 6 角色脑暴
├── multi-thinker-debate.md        🎭 3 角色辩论
├── MULTI-THINKER-GUIDE.md        📖 思维技能指南
├── git-master.md                  🔧 Git 自动化
├── auto-qa.md                     🧪 自动化测试
├── auto-qa-examples.md           📝 测试示例
├── project-analyst.md             🔍 项目分析（含权限检测）
├── project-init.md                📐 项目标准化（含权限检测）
├── setup-project-permissions.sh  🔐 一键权限配置脚本
└── SKILLS-ECOSYSTEM.md           📚 本文件（生态指南）
```

---

## 🎯 总结

```
┌───────────────────────────────────────────────┐
│         Claude Code 技能生态系统              │
├───────────────────────────────────────────────┤
│                                               │
│  🎯 problem-solver（核心）                   │
│     自动识别问题类型 → 编排技能协同           │
│                                               │
│  🌟 multi-thinker-brainstorm（发散）         │
│     6 角色协同 → 产生创新点                   │
│                                               │
│  🎭 multi-thinker-debate（收敛）             │
│     3 角色对抗 → 做出决策                     │
│                                               │
│  🔧🧪🔍📐 4 个专项技能                       │
│     Git | QA | 分析 | 标准化                  │
│                                               │
└───────────────────────────────────────────────┘

核心理念：
  ✅ 一次提问，自动编排
  ✅ 先发散，后收敛
  ✅ 输出可执行方案
```

---

**记住**：复杂问题直接问，`problem-solver` 会自动完成"发散→收敛→执行"全流程！
